<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>AMPS C++ Client QuickStart &#8212; C++ Quickstart Guide develop
 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'develop',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="#">
              <img class="logo" src="_static/flag_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">AMPS C++ Client QuickStart</a></li>
<li><a class="reference internal" href="#welcome-to-amps">Welcome to AMPS!</a><ul>
<li><a class="reference internal" href="#what-makes-amps-different">What makes AMPS different?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-the-equipment">Get the Equipment</a></li>
<li><a class="reference internal" href="#turn-it-on">Turn It On</a></li>
<li><a class="reference internal" href="#crank-it-up">Crank It Up!</a></li>
<li><a class="reference internal" href="#using-a-state-of-the-world-database">Using a State-of-the-World Database</a></li>
<li><a class="reference internal" href="#message-replay-with-client-side-state">Message Replay with Client-Side State</a></li>
<li><a class="reference internal" href="#faster-louder-better">Faster. Louder. Better.</a></li>
<li><a class="reference internal" href="#keep-it-going">Keep It Going</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="amps-c-client-quickstart">
<h1>AMPS C++ Client QuickStart<a class="headerlink" href="#amps-c-client-quickstart" title="Permalink to this headline">¶</a></h1>
<p><strong>Version</strong> develop
</p>
<p><strong>Publication Date</strong> Oct 05, 2023</p>
</div>
<div class="section" id="welcome-to-amps">
<h1>Welcome to AMPS!<a class="headerlink" href="#welcome-to-amps" title="Permalink to this headline">¶</a></h1>
<p>AMPS, the Advanced Message Processing System, is a reliable high-performance
publish and subscribe engine designed for real-world messaging applications that
demand the highest performance and lowest latency possible. AMPS solves the
hardest problems for modern pub/sub and queuing applications in a way that
maximizes performance and reliability without compromising ease of use.</p>
<div class="section" id="what-makes-amps-different">
<h2>What makes AMPS different?<a class="headerlink" href="#what-makes-amps-different" title="Permalink to this headline">¶</a></h2>
<p>AMPS is designed for extremely demanding, real-world messaging applications. This means that AMPS has:</p>
<ul class="simple">
<li>Uncompromising focus on real-world needs<ul>
<li>Hardware-level optimization for performance</li>
<li>Easy-to-use programming interface</li>
<li>Detailed monitoring and diagnostics</li>
</ul>
</li>
<li>Complete solution for high-volume low-latency applications<ul>
<li>Durability and transactional consistency</li>
<li>Both pub/sub and queuing delivery models</li>
<li>Replication for high availability</li>
<li>Persistent state-of-the-world database</li>
<li>Content filtering with SQL92 WHERE clause semantics</li>
<li>Topic views, projection and JOIN</li>
<li>Message replay and historical point-in-time query</li>
<li>Real-time computation and analysis using standard SQL semantics</li>
<li>Delta publish and subscribe for lightweight updates</li>
<li>Built-in handling for FIX, NVFIX, JSON, BSON, Google Protocol Buffer, MessagePack and XML messages</li>
</ul>
</li>
</ul>
<p>AMPS allows you to configure each server, topic, or view to use exactly the features that you need. This keeps AMPS programming and administration simple.</p>
</div>
</div>
<div class="section" id="get-the-equipment">
<h1>Get the Equipment<a class="headerlink" href="#get-the-equipment" title="Permalink to this headline">¶</a></h1>
<p>To get the most out of your evaluation, you will need:</p>
<ol class="arabic simple">
<li>An installation of AMPS on a Linux host<ul>
<li>An Linux installation and a local installation of AMPS.<ul>
<li>If you do not already have a Linux installation, you can use a virtual machine, for example, VirtualBox available at <a class="reference external" href="http://virtualbox.org">http://virtualbox.org</a></li>
<li>Make sure that Virtualization Technology is enabled on your development machine, as described at <a class="reference external" href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1003944">http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1003944</a></li>
<li>Create a Virtual Machine with enough memory and disk space to hold the data you intend to use with your AMPS evaluation</li>
<li>Install the Linux distribution of your choice</li>
<li>Download the AMPS Linux distribution at <a class="reference external" href="http://crankuptheamps.com/evaluation">http://crankuptheamps.com/evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li>The AMPS C++ client (which this file is part of). Visit crankuptheamps.com to download the latest client distributions, server distributions, and documentation.</li>
</ol>
</div>
<div class="section" id="turn-it-on">
<h1>Turn It On<a class="headerlink" href="#turn-it-on" title="Permalink to this headline">¶</a></h1>
<p>To install the Linux distribution of AMPS and start the evaluation server:</p>
<ol class="arabic">
<li><p class="first">Extract the Linux distribution of AMPS and the AMPS client.</p>
</li>
<li><p class="first">Make a config directory in the AMPS distribution directory, for example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir ~/amps_dir/config
</pre></div>
</div>
</li>
<li><p class="first">Copy the <code class="docutils literal"><span class="pre">sample.xml</span></code> file from the samples directory into the
config directory you just created, for example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ cp sample.xml ~/amps_dir/config/sample.xml
</pre></div>
</div>
</li>
<li><p class="first">Change directories to the AMPS distribution directory and start AMPS with the  sample config file. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/amps_dir/

$ ./bin/ampServer ./config/sample.xml
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="crank-it-up">
<h1>Crank It Up!<a class="headerlink" href="#crank-it-up" title="Permalink to this headline">¶</a></h1>
<p>In this section, we describe using the AMPS samples from the command line. You can also use your IDE of choice, if you prefer.</p>
<p>To get started with AMPS, create a simple subscriber and publisher:</p>
<ol class="arabic simple">
<li>Open a command shell</li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li>Navigate to the directory where you unzipped the client distribution</li>
<li>Navigate to <code class="docutils literal"><span class="pre">samples</span></code></li>
</ol>
</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Update the connection strings to connect to AMPS</p>
<p><em>FROM THE LINUX COMMAND LINE:</em></p>
<ol class="loweralpha">
<li><p class="first">From the samples directory, type the following command to replace the IP address:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">$sed</span> -ri <span class="s1">&#39;s/127.0.0.1/ip address here/&#39;</span> *.cpp *.h
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Build the samples</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ make
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Run the sample subscriber</p>
<ol class="loweralpha simple">
<li>From the samples directory, you can run the example by typing:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_subscribe <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<p>This command line runs the subscriber, and then sends it to the background. Messages from the subscriber will be printed to the console. Of course, no messages will be received until a message is published.</p>
</li>
<li><p class="first">Run the sample publisher</p>
<ol class="loweralpha simple">
<li>From the samples directory, you can run the example by typing:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_publish <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>The program runs, and subscribers receive the Hello, World message. The publisher itself produces no output if it is successful. The subscriber will receive the message.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="using-a-state-of-the-world-database">
<h1>Using a State-of-the-World Database<a class="headerlink" href="#using-a-state-of-the-world-database" title="Permalink to this headline">¶</a></h1>
<p>One of the most useful parts of AMPS is being able to keep track of the current value of a message, using the state of the world (SOW) database:</p>
<ol class="arabic">
<li><p class="first">Add messages to a state of the world database</p>
<ol class="loweralpha simple">
<li>From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run the publisher by typing:</li>
</ol>
<blockquote>
<div><blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_publish_sow <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>The program runs. This program sends 10,000 messages to AMPS, and then adds an optional field to some messages.</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Retrieve the state of the world</p>
<ol class="loweralpha simple">
<li>From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run the query example by typing:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_query_sow <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>The program runs three queries on the SOW. The first query returns every message with a <code class="docutils literal"><span class="pre">messageNumber</span></code> that is evenly divisible by <code class="docutils literal"><span class="pre">10</span></code>. The second query returns every message to which the optional field has been added. The last query retrieves messages with a messageNumber evenly divisible by 10 and an optional field.</li>
</ol>
</li>
</ol>
<p>AMPS also provides the ability to query the state of the world and then immediately subscribe to updates. When using this functionality, AMPS registers the subscription when it begins the query. Updates that occur while the query is running are delivered to the subscriber, in order, after the query results are returned.</p>
<ol class="arabic">
<li><p class="first">Run the SOW and subscribe sample:</p>
<ol class="loweralpha simple">
<li>From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run the query example by typing:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_sow_and_subscribe <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>The program runs. The program simultaneously runs a query on the SOW and registers a subscription. The results of the query return immediately, and the program waits for additional messages to arrive.</li>
</ol>
</li>
<li><p class="first">Publish more messages to the SOW database.</p>
<ol class="loweralpha simple">
<li>From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run the SOW publisher by typing:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_publish_sow <span class="p">&amp;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>The program runs. This program does not produce output, but instead publishes messages to AMPS. The program then updates the value of several messages and adds an optional field to those messages.</li>
<li>The subscriber started in step 1 above will show messages that match the subscription filter as they arrive.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="message-replay-with-client-side-state">
<h1>Message Replay with Client-Side State<a class="headerlink" href="#message-replay-with-client-side-state" title="Permalink to this headline">¶</a></h1>
<p>AMPS features a fully queryable transaction log that allows you to replay messages from any point in time. To do this, you configure AMPS to save a transaction log for a specific topic or set of topics, then request a subscription from a point in time. AMPS replays the messages in the transaction log, and then continues the subscription for incoming messages.</p>
<p>The evaluation kit contains samples that demonstrate message replay. In addition, the subscriber keeps track of the messages received, so that the subscriber receives each message only once.</p>
<ol class="arabic">
<li><p class="first">Publish messages to the transaction log.</p>
<ol class="loweralpha">
<li><p class="first">From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run a publisher that publishes messages to the transaction log.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_publish_for_replay <span class="p">&amp;</span>
</pre></div>
</div>
</li>
<li><p class="first">The program publishes 1000 messages at a time to the transaction log. Each message published has a unique orderId. The program waits for one second between sets of 1000 messages.</p>
</li>
</ol>
</li>
<li><p class="first">Wait for a few seconds, then replay the messages.</p>
<ol class="loweralpha">
<li><p class="first">From the <code class="docutils literal"><span class="pre">samples</span></code> directory, run the replay subscriber by typing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_subscribe_with_replay
</pre></div>
</div>
</li>
<li><p class="first">The program runs, and receives messages.</p>
</li>
<li><p class="first">Stop the program by pressing Ctrl-C.</p>
</li>
<li><p class="first">Run the program again by typing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ./amps_subscribe_with_replay
</pre></div>
</div>
<p>The program resumes the subscription after the last received message.</p>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="faster-louder-better">
<h1>Faster. Louder. Better.<a class="headerlink" href="#faster-louder-better" title="Permalink to this headline">¶</a></h1>
<p>From here, the world of AMPS is yours to explore. The Evaluation Kit gives you a set of guides to help you understand how AMPS works and what you need to do to take advantage of AMPS in your applications.</p>
<p>The AMPS User Guide describes the features of AMPS in detail, with a focus on helping you understand the concepts behind AMPS. The AMPS C++ Developer Guide describes the C++ interface for AMPS.</p>
<p>You know what your application needs. We’ve provided some suggestions for simple programs that will help you get familiar with AMPS and help you understand how AMPS can help you.</p>
<p>Suggested learning projects:</p>
<ul class="simple">
<li>Understanding the state of the world. Fill the SOW database with messages. Verify this using the amps_sow_dump tool, as you did for AMPSSOWPublisher. Update a few messages in the database. Verify the updates using the amps_sow_dump tool. Then write a program that uses SOW and delta subscriptions to get the same information.</li>
<li>Working with multiple AMPS instances. Create an application that forwards selected messages from one AMPS instance to another.</li>
<li>Working with views. Create a view in AMPS that does simple calculation on values within incoming messages. Create an application that uses a filtered subscription on the view to view messages where the calculated value is within a certain range. Modify the application to use an out-of-focus message to be notified when the calculated value is outside of that range.</li>
<li>Try a message queue. The sample configuration has a queue named <code class="docutils literal"><span class="pre">sample-queue</span></code> defined for the JSON message type. Try sending a few messages to the queue, then starting a few subscribers to receive and acknowledge the messages.</li>
<li>Make a remix. Add <code class="docutils literal"><span class="pre">Enrichment</span></code> to one of the <code class="docutils literal"><span class="pre">Topic</span></code> definitions in the state of the world and see how AMPS can enrich and annotate messages as they&#8217;re published to the server.</li>
</ul>
</div>
<div class="section" id="keep-it-going">
<h1>Keep It Going<a class="headerlink" href="#keep-it-going" title="Permalink to this headline">¶</a></h1>
<p>Want to know more about how AMPS can help you build great applications? Still having trouble getting AMPS to play your tune? For help or questions, get in touch at <a class="reference external" href="http://support.crankuptheamps.com">http://support.crankuptheamps.com</a>. And if AMPS ever overloads (produces a minidump), send the dump file to <a class="reference external" href="mailto:crash&#37;&#52;&#48;crankuptheamps&#46;com">crash<span>&#64;</span>crankuptheamps<span>&#46;</span>com</a>.</p>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, 60East Technologies, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>