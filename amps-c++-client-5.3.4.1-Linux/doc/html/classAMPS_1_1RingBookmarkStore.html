<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AMPS C/C++ Client Class Reference: AMPS::RingBookmarkStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AMPS C/C++ Client Class Reference
   </div>
   <div id="projectbrief">AMPS C/C++ Client Version 5.3.4.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classAMPS_1_1RingBookmarkStore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classAMPS_1_1RingBookmarkStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AMPS::RingBookmarkStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="classAMPS_1_1BookmarkStoreImpl.html" title="Abstract base class for storing received bookmarks for HA clients. ">BookmarkStoreImpl</a> that stores only the MOST_RECENT bookmark to a file for recovery and keeps any bookmarks later than most recent in memory.  
 <a href="classAMPS_1_1RingBookmarkStore.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="RingBookmarkStore_8hpp_source.html">RingBookmarkStore.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for AMPS::RingBookmarkStore:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classAMPS_1_1RingBookmarkStore.png" usemap="#AMPS::RingBookmarkStore_map" alt=""/>
  <map id="AMPS::RingBookmarkStore_map" name="AMPS::RingBookmarkStore_map">
<area href="classAMPS_1_1MemoryBookmarkStore.html" title="A BookmarkStoreImpl implementation that stores bookmarks in memory. " alt="AMPS::MemoryBookmarkStore" shape="rect" coords="0,56,185,80"/>
<area href="classAMPS_1_1BookmarkStoreImpl.html" title="Abstract base class for storing received bookmarks for HA clients. " alt="AMPS::BookmarkStoreImpl" shape="rect" coords="0,0,185,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1746b55fb65ca6b64b57e8351376ba12"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#a1746b55fb65ca6b64b57e8351376ba12">RingBookmarkStore</a> (const char *fileName_)</td></tr>
<tr class="memdesc:a1746b55fb65ca6b64b57e8351376ba12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classAMPS_1_1RingBookmarkStore.html" title="A BookmarkStoreImpl that stores only the MOST_RECENT bookmark to a file for recovery and keeps any bo...">RingBookmarkStore</a> using fileName_ for storage of most recent.  <a href="#a1746b55fb65ca6b64b57e8351376ba12">More...</a><br /></td></tr>
<tr class="separator:a1746b55fb65ca6b64b57e8351376ba12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4db0544c95d4ba472af3b688eb62d3f"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#ab4db0544c95d4ba472af3b688eb62d3f">log</a> (<a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;message_)</td></tr>
<tr class="memdesc:ab4db0544c95d4ba472af3b688eb62d3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the corresponding sequence number for this bookmark.  <a href="#ab4db0544c95d4ba472af3b688eb62d3f">More...</a><br /></td></tr>
<tr class="separator:ab4db0544c95d4ba472af3b688eb62d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af788d97ee33b2083cf390d142ddbd94d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#af788d97ee33b2083cf390d142ddbd94d">discard</a> (const <a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;message_)</td></tr>
<tr class="memdesc:af788d97ee33b2083cf390d142ddbd94d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a discard-bookmark entry to the persistent log based on a bookmark sequence number.  <a href="#af788d97ee33b2083cf390d142ddbd94d">More...</a><br /></td></tr>
<tr class="separator:af788d97ee33b2083cf390d142ddbd94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1da6f513b99796edbe144892d5b354d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#ac1da6f513b99796edbe144892d5b354d">discard</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_, size_t bookmarkSeqNo_)</td></tr>
<tr class="memdesc:ac1da6f513b99796edbe144892d5b354d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a discard-bookmark entry to the persistent log based on a bookmark sequence number.  <a href="#ac1da6f513b99796edbe144892d5b354d">More...</a><br /></td></tr>
<tr class="separator:ac1da6f513b99796edbe144892d5b354d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d39c698c18ac0c165678d9360476024"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#a2d39c698c18ac0c165678d9360476024">persisted</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_, const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;bookmark_)</td></tr>
<tr class="memdesc:a2d39c698c18ac0c165678d9360476024"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the bookmark provided as replicated to all sync replication destinations for the given subscription.  <a href="#a2d39c698c18ac0c165678d9360476024">More...</a><br /></td></tr>
<tr class="separator:a2d39c698c18ac0c165678d9360476024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e5e86d2e163d27761ed0a388253769"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAMPS_1_1Field.html">Message::Field</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#ad1e5e86d2e163d27761ed0a388253769">getMostRecent</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_)</td></tr>
<tr class="memdesc:ad1e5e86d2e163d27761ed0a388253769"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the most recent bookmark from the log that ought to be used for (re-)subscriptions.  <a href="#ad1e5e86d2e163d27761ed0a388253769">More...</a><br /></td></tr>
<tr class="separator:ad1e5e86d2e163d27761ed0a388253769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3b9b83cfd448116825467c607721fa"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#aee3b9b83cfd448116825467c607721fa">purge</a> ()</td></tr>
<tr class="memdesc:aee3b9b83cfd448116825467c607721fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to purge the contents of this store.  <a href="#aee3b9b83cfd448116825467c607721fa">More...</a><br /></td></tr>
<tr class="separator:aee3b9b83cfd448116825467c607721fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2692292aa23715bfe875ee9e500c20af"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1RingBookmarkStore.html#a2692292aa23715bfe875ee9e500c20af">purge</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_)</td></tr>
<tr class="memdesc:a2692292aa23715bfe875ee9e500c20af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to purge the contents of this store for particular subId.  <a href="#a2692292aa23715bfe875ee9e500c20af">More...</a><br /></td></tr>
<tr class="separator:a2692292aa23715bfe875ee9e500c20af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAMPS_1_1MemoryBookmarkStore"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAMPS_1_1MemoryBookmarkStore')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html">AMPS::MemoryBookmarkStore</a></td></tr>
<tr class="memitem:a5d2b8a438b344ef7c6a349778948f208 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d2b8a438b344ef7c6a349778948f208"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a5d2b8a438b344ef7c6a349778948f208">MemoryBookmarkStore</a> ()</td></tr>
<tr class="memdesc:a5d2b8a438b344ef7c6a349778948f208 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html" title="A BookmarkStoreImpl implementation that stores bookmarks in memory. ">MemoryBookmarkStore</a>. <br /></td></tr>
<tr class="separator:a5d2b8a438b344ef7c6a349778948f208 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db5462920b519f384efeff31cdf7009 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a6db5462920b519f384efeff31cdf7009">MemoryBookmarkStore</a> (const <a class="el" href="classAMPS_1_1RecoveryPointAdapter.html">RecoveryPointAdapter</a> &amp;adapter_, RecoveryPointFactory factory_=NULL)</td></tr>
<tr class="memdesc:a6db5462920b519f384efeff31cdf7009 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html" title="A BookmarkStoreImpl implementation that stores bookmarks in memory. ">MemoryBookmarkStore</a>.  <a href="#a6db5462920b519f384efeff31cdf7009">More...</a><br /></td></tr>
<tr class="separator:a6db5462920b519f384efeff31cdf7009 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af984d279494b80536791466ac5439497 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#af984d279494b80536791466ac5439497">isDiscarded</a> (<a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;message_)</td></tr>
<tr class="memdesc:af984d279494b80536791466ac5439497 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called for each arriving message to determine if the application has already seen this bookmark and should not be reprocessed.  <a href="#af984d279494b80536791466ac5439497">More...</a><br /></td></tr>
<tr class="separator:af984d279494b80536791466ac5439497 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e414b8b5d65e31d87cf41d913787bd inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#ac7e414b8b5d65e31d87cf41d913787bd">getOldestBookmarkSeq</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_)</td></tr>
<tr class="memdesc:ac7e414b8b5d65e31d87cf41d913787bd inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to find the oldest bookmark in the store.  <a href="#ac7e414b8b5d65e31d87cf41d913787bd">More...</a><br /></td></tr>
<tr class="separator:ac7e414b8b5d65e31d87cf41d913787bd inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78878c789234c06bd2f3af6d29854e4f inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAMPS_1_1Field.html">Message::Field</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a78878c789234c06bd2f3af6d29854e4f">persisted</a> (const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;subId_, size_t bookmark_)</td></tr>
<tr class="memdesc:a78878c789234c06bd2f3af6d29854e4f inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the bookmark provided as replicated to all sync replication destinations for the given subscription.  <a href="#a78878c789234c06bd2f3af6d29854e4f">More...</a><br /></td></tr>
<tr class="separator:a78878c789234c06bd2f3af6d29854e4f inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f920a22750daf07d95911b293651cf inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a70f920a22750daf07d95911b293651cf">setServerVersion</a> (const VersionInfo &amp;version_)</td></tr>
<tr class="memdesc:a70f920a22750daf07d95911b293651cf inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internally used to set the server version so the store knows how to deal with persisted acks and calls to <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#af438d5c6e6222e9d183c9ea103e74552" title="Returns the most recent bookmark from the log that ought to be used for (re-)subscriptions. ">getMostRecent()</a>.  <a href="#a70f920a22750daf07d95911b293651cf">More...</a><br /></td></tr>
<tr class="separator:a70f920a22750daf07d95911b293651cf inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d6b0ffe1c9048cb74eb000ed324041 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#aa9d6b0ffe1c9048cb74eb000ed324041">setServerVersion</a> (size_t version_)</td></tr>
<tr class="memdesc:aa9d6b0ffe1c9048cb74eb000ed324041 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internally used to set the server version so the store knows how to deal with persisted acks and calls to <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#af438d5c6e6222e9d183c9ea103e74552" title="Returns the most recent bookmark from the log that ought to be used for (re-)subscriptions. ">getMostRecent()</a>.  <a href="#aa9d6b0ffe1c9048cb74eb000ed324041">More...</a><br /></td></tr>
<tr class="separator:aa9d6b0ffe1c9048cb74eb000ed324041 inherit pub_methods_classAMPS_1_1MemoryBookmarkStore"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAMPS_1_1BookmarkStoreImpl"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAMPS_1_1BookmarkStoreImpl')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAMPS_1_1BookmarkStoreImpl.html">AMPS::BookmarkStoreImpl</a></td></tr>
<tr class="memitem:a4857228cb69941db5ff477a991ae2419 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1BookmarkStoreImpl.html#a4857228cb69941db5ff477a991ae2419">setResizeHandler</a> (BookmarkStoreResizeHandler handler_, void *userData_)</td></tr>
<tr class="memdesc:a4857228cb69941db5ff477a991ae2419 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a handler on the bookmark store that will get called whenever a resize of the store is required due to the number of stored bookmarks exceeding the currently allocated storage to hold them.  <a href="#a4857228cb69941db5ff477a991ae2419">More...</a><br /></td></tr>
<tr class="separator:a4857228cb69941db5ff477a991ae2419 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa427f2fe9bc3f68f2c6b75402eb756 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1BookmarkStoreImpl.html#a1fa427f2fe9bc3f68f2c6b75402eb756">getMaxSubIdLength</a> () const </td></tr>
<tr class="memdesc:a1fa427f2fe9bc3f68f2c6b75402eb756 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum allowed length for a sub id when recovering a bookmark store from persistent storage.  <a href="#a1fa427f2fe9bc3f68f2c6b75402eb756">More...</a><br /></td></tr>
<tr class="separator:a1fa427f2fe9bc3f68f2c6b75402eb756 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4cf0a381eae71b4ca53138851004b5 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1BookmarkStoreImpl.html#a7e4cf0a381eae71b4ca53138851004b5">setMaxSubIdLength</a> (size_t maxSubIdLength_)</td></tr>
<tr class="memdesc:a7e4cf0a381eae71b4ca53138851004b5 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum allowed length for a sub id when recovering a bookmark store from persistent storage.  <a href="#a7e4cf0a381eae71b4ca53138851004b5">More...</a><br /></td></tr>
<tr class="separator:a7e4cf0a381eae71b4ca53138851004b5 inherit pub_methods_classAMPS_1_1BookmarkStoreImpl"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classAMPS_1_1BookmarkStoreImpl.html" title="Abstract base class for storing received bookmarks for HA clients. ">BookmarkStoreImpl</a> that stores only the MOST_RECENT bookmark to a file for recovery and keeps any bookmarks later than most recent in memory. </p>
<p>This class is best used when you want permanent storage for recovery on the client side, but expect to process all messages in order. It will not protect you from possibly missing or duplicate bookmarks that can occur if you are using a bookmark live subscription and you have to fail over to another AMPS instance which receives messages in a different order. The storage actually has 3 storage positions to allow for protection against crashes while updating storage. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1746b55fb65ca6b64b57e8351376ba12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AMPS::RingBookmarkStore::RingBookmarkStore </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileName_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classAMPS_1_1RingBookmarkStore.html" title="A BookmarkStoreImpl that stores only the MOST_RECENT bookmark to a file for recovery and keeps any bo...">RingBookmarkStore</a> using fileName_ for storage of most recent. </p>
<p>If the file exists and has a valid bookmark, it will be recovered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName_</td><td>The name of the file to use for storage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af788d97ee33b2083cf390d142ddbd94d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AMPS::RingBookmarkStore::discard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>message_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log a discard-bookmark entry to the persistent log based on a bookmark sequence number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message_</td><td>The <a class="el" href="classAMPS_1_1Message.html" title="Message encapsulates a single message sent to or received from an AMPS server, and provides methods f...">Message</a> to discard. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a14fb5bfab1575902b5eac15dd1c6c45a">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="ac1da6f513b99796edbe144892d5b354d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AMPS::RingBookmarkStore::discard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;&#160;</td>
          <td class="paramname"><em>subId_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bookmarkSeqNo_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log a discard-bookmark entry to the persistent log based on a bookmark sequence number. </p>
<p>Use the <a class="el" href="classAMPS_1_1RingBookmarkStore.html#af788d97ee33b2083cf390d142ddbd94d">discard(const Message&amp;)</a> function instead when you have the full <a class="el" href="classAMPS_1_1Message.html" title="Message encapsulates a single message sent to or received from an AMPS server, and provides methods f...">Message</a> object available.. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subId_</td><td>The id of the subscription to which the bookmark applies. </td></tr>
    <tr><td class="paramname">bookmarkSeqNo_</td><td>The bookmark sequence number to discard. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a6bf497df12dfe44ccc9b711f15bdb5cd">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="ad1e5e86d2e163d27761ed0a388253769"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> AMPS::RingBookmarkStore::getMostRecent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;&#160;</td>
          <td class="paramname"><em>subId_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the most recent bookmark from the log that ought to be used for (re-)subscriptions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subId_</td><td>The id of the subscription to check. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#af438d5c6e6222e9d183c9ea103e74552">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="ab4db0544c95d4ba472af3b688eb62d3f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t AMPS::RingBookmarkStore::log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>message_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the corresponding sequence number for this bookmark. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message_</td><td>The <a class="el" href="classAMPS_1_1Message.html" title="Message encapsulates a single message sent to or received from an AMPS server, and provides methods f...">Message</a> to check. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#aaf57a589be1403c953a0d07504e28d1e">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="a2d39c698c18ac0c165678d9360476024"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AMPS::RingBookmarkStore::persisted </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;&#160;</td>
          <td class="paramname"><em>subId_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;&#160;</td>
          <td class="paramname"><em>bookmark_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mark the bookmark provided as replicated to all sync replication destinations for the given subscription. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subId_</td><td>The subscription Id to which the bookmark applies. </td></tr>
    <tr><td class="paramname">bookmark_</td><td>The most recent replicated bookmark. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a6ad5edd3e297a07942de27a83b6a8e98">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="aee3b9b83cfd448116825467c607721fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AMPS::RingBookmarkStore::purge </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to purge the contents of this store. </p>
<p>Removes any tracking history associated with publishers and received messages, and may delete or truncate on-disk representations as well. </p>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a37bd2b2bea4df2e8f57625e0dc541d9e">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<a class="anchor" id="a2692292aa23715bfe875ee9e500c20af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AMPS::RingBookmarkStore::purge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Field.html">Message::Field</a> &amp;&#160;</td>
          <td class="paramname"><em>subId_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to purge the contents of this store for particular subId. </p>
<p>Removes any tracking history associated with publishers and received messages, and will remove the subId from the file as well. </p>

<p>Reimplemented from <a class="el" href="classAMPS_1_1MemoryBookmarkStore.html#a32aa1ef9781a8f92835f5b4691a9a8ba">AMPS::MemoryBookmarkStore</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/amps/<a class="el" href="RingBookmarkStore_8hpp_source.html">RingBookmarkStore.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>AMPS</b></li><li class="navelem"><a class="el" href="classAMPS_1_1RingBookmarkStore.html">RingBookmarkStore</a></li>
    <li class="footer">Generated on Mon Oct 9 2023 18:11:31 for AMPS C/C++ Client Class Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
