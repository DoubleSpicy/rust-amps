<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AMPS C/C++ Client Class Reference: AMPS::Store Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AMPS C/C++ Client Class Reference
   </div>
   <div id="projectbrief">AMPS C/C++ Client Version 5.3.4.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classAMPS_1_1Store.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classAMPS_1_1Store-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AMPS::Store Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handle class for <a class="el" href="classAMPS_1_1StoreImpl.html" title="Abstract base class for storing published messages for an HA publisher client. ">StoreImpl</a> classes that track publish messages.  
 <a href="classAMPS_1_1Store.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ampsplusplus_8hpp_source.html">ampsplusplus.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acb06fbca0f83c7c4dfc91662b9149dba"><td class="memItemLeft" align="right" valign="top">amps_uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#acb06fbca0f83c7c4dfc91662b9149dba">store</a> (const <a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;message_)</td></tr>
<tr class="memdesc:acb06fbca0f83c7c4dfc91662b9149dba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to store a message being published.  <a href="#acb06fbca0f83c7c4dfc91662b9149dba">More...</a><br /></td></tr>
<tr class="separator:acb06fbca0f83c7c4dfc91662b9149dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec3c52b0f3d54454f55d8ccb071151c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a7ec3c52b0f3d54454f55d8ccb071151c">discardUpTo</a> (amps_uint64_t index_)</td></tr>
<tr class="memdesc:a7ec3c52b0f3d54454f55d8ccb071151c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to indicate that all messages up to and including.  <a href="#a7ec3c52b0f3d54454f55d8ccb071151c">More...</a><br /></td></tr>
<tr class="separator:a7ec3c52b0f3d54454f55d8ccb071151c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a061742652521bbbf91709703cd75f8cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a061742652521bbbf91709703cd75f8cc">replay</a> (<a class="el" href="classAMPS_1_1StoreReplayer.html">StoreReplayer</a> &amp;replayer_)</td></tr>
<tr class="memdesc:a061742652521bbbf91709703cd75f8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to get all stored and non-discarded messages replayed by the store onto the <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a>.  <a href="#a061742652521bbbf91709703cd75f8cc">More...</a><br /></td></tr>
<tr class="separator:a061742652521bbbf91709703cd75f8cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac715c8dd8436c4c484e53a31668366a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#ac715c8dd8436c4c484e53a31668366a0">replaySingle</a> (<a class="el" href="classAMPS_1_1StoreReplayer.html">StoreReplayer</a> &amp;replayer_, amps_uint64_t index_)</td></tr>
<tr class="memdesc:ac715c8dd8436c4c484e53a31668366a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to get a single message replayed by the store onto the <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a>.  <a href="#ac715c8dd8436c4c484e53a31668366a0">More...</a><br /></td></tr>
<tr class="separator:ac715c8dd8436c4c484e53a31668366a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac936fdf868fb74571577f3f6f9251930"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#ac936fdf868fb74571577f3f6f9251930">unpersistedCount</a> () const </td></tr>
<tr class="memdesc:ac936fdf868fb74571577f3f6f9251930"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to return how many messages are in the store that have not been discarded, indicating that they are not yet persisted by the AMPS server.  <a href="#ac936fdf868fb74571577f3f6f9251930">More...</a><br /></td></tr>
<tr class="separator:ac936fdf868fb74571577f3f6f9251930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3302f995710b33a7d16b715e7e2bd7ac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a3302f995710b33a7d16b715e7e2bd7ac">isValid</a> () const </td></tr>
<tr class="memdesc:a3302f995710b33a7d16b715e7e2bd7ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to return if there is an underlying implementation for the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a>.  <a href="#a3302f995710b33a7d16b715e7e2bd7ac">More...</a><br /></td></tr>
<tr class="separator:a3302f995710b33a7d16b715e7e2bd7ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab074d36fc26325c59630e90c5bd871b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#ab074d36fc26325c59630e90c5bd871b4">flush</a> (long timeout_=0)</td></tr>
<tr class="memdesc:ab074d36fc26325c59630e90c5bd871b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to wait for the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> to discard everything that has been stored up to the point in time when flush is called.  <a href="#ab074d36fc26325c59630e90c5bd871b4">More...</a><br /></td></tr>
<tr class="separator:ab074d36fc26325c59630e90c5bd871b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928e1a334e213cb4d00a113e85984d52"><td class="memItemLeft" align="right" valign="top">amps_uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a928e1a334e213cb4d00a113e85984d52">getLowestUnpersisted</a> ()</td></tr>
<tr class="memdesc:a928e1a334e213cb4d00a113e85984d52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the oldest unpersisted message sequence in the store.  <a href="#a928e1a334e213cb4d00a113e85984d52">More...</a><br /></td></tr>
<tr class="separator:a928e1a334e213cb4d00a113e85984d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cf5ab022849a4bc25c5d4f75653cf8b"><td class="memItemLeft" align="right" valign="top">amps_uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a5cf5ab022849a4bc25c5d4f75653cf8b">getLastPersisted</a> ()</td></tr>
<tr class="memdesc:a5cf5ab022849a4bc25c5d4f75653cf8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last persisted message sequence in the store.  <a href="#a5cf5ab022849a4bc25c5d4f75653cf8b">More...</a><br /></td></tr>
<tr class="separator:a5cf5ab022849a4bc25c5d4f75653cf8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab267b150a870f650ea5f3a5b6c6aac01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#ab267b150a870f650ea5f3a5b6c6aac01">setResizeHandler</a> (PublishStoreResizeHandler handler_, void *userData_)</td></tr>
<tr class="memdesc:ab267b150a870f650ea5f3a5b6c6aac01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a handler to be called if the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> needs to resize in order to keep storing messages.  <a href="#ab267b150a870f650ea5f3a5b6c6aac01">More...</a><br /></td></tr>
<tr class="separator:ab267b150a870f650ea5f3a5b6c6aac01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7f5bd02d664786a067b1cf8b54728fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#ac7f5bd02d664786a067b1cf8b54728fa">setErrorOnPublishGap</a> (bool errorOnPublishGap_)</td></tr>
<tr class="memdesc:ac7f5bd02d664786a067b1cf8b54728fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to enable or disable throwing PublishStoreGapException.  <a href="#ac7f5bd02d664786a067b1cf8b54728fa">More...</a><br /></td></tr>
<tr class="separator:ac7f5bd02d664786a067b1cf8b54728fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2c8054f0f9cbd6728122a43a9aeb53f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#aa2c8054f0f9cbd6728122a43a9aeb53f">getErrorOnPublishGap</a> () const </td></tr>
<tr class="memdesc:aa2c8054f0f9cbd6728122a43a9aeb53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to check if the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> will throw PublishStoreGapException.  <a href="#aa2c8054f0f9cbd6728122a43a9aeb53f">More...</a><br /></td></tr>
<tr class="separator:aa2c8054f0f9cbd6728122a43a9aeb53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec6dc4d797cb1e7f5ed68183c38d9c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAMPS_1_1StoreImpl.html">StoreImpl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAMPS_1_1Store.html#a0ec6dc4d797cb1e7f5ed68183c38d9c4">get</a> ()</td></tr>
<tr class="memdesc:a0ec6dc4d797cb1e7f5ed68183c38d9c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to get a pointer to the implementation.  <a href="#a0ec6dc4d797cb1e7f5ed68183c38d9c4">More...</a><br /></td></tr>
<tr class="separator:a0ec6dc4d797cb1e7f5ed68183c38d9c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handle class for <a class="el" href="classAMPS_1_1StoreImpl.html" title="Abstract base class for storing published messages for an HA publisher client. ">StoreImpl</a> classes that track publish messages. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7ec3c52b0f3d54454f55d8ccb071151c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AMPS::Store::discardUpTo </td>
          <td>(</td>
          <td class="paramtype">amps_uint64_t&#160;</td>
          <td class="paramname"><em>index_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to indicate that all messages up to and including. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index_</td><td>have been successfully published to the server and are no longer required to be in the store. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">PublishStoreGapException</td><td>If index_ &lt; <a class="el" href="classAMPS_1_1Store.html#a5cf5ab022849a4bc25c5d4f75653cf8b" title="Get the last persisted message sequence in the store. ">getLastPersisted()</a> which could leave a gap on the server of missing messages from this <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab074d36fc26325c59630e90c5bd871b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AMPS::Store::flush </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to wait for the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> to discard everything that has been stored up to the point in time when flush is called. </p>
<p>It will get the current max and wait up to timeout for that message to be discarded </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout_</td><td>The number of milliseconds to wait for the messages to be acknowledged by AMPS and discarded by the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a>. 0 indicates no timeout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DisconnectedException</td><td>The <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> is no longer connected to a server. </td></tr>
    <tr><td class="paramname">ConnectionException</td><td>An error occurred while sending the message. </td></tr>
    <tr><td class="paramname">TimedOutException</td><td>The publish command was not acked in the allowed time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0ec6dc4d797cb1e7f5ed68183c38d9c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAMPS_1_1StoreImpl.html">StoreImpl</a>* AMPS::Store::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to get a pointer to the implementation. </p>
<dl class="section return"><dt>Returns</dt><dd>The StoreImpl* for this store's implementation. </dd></dl>

</div>
</div>
<a class="anchor" id="aa2c8054f0f9cbd6728122a43a9aeb53f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AMPS::Store::getErrorOnPublishGap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to check if the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> will throw PublishStoreGapException. </p>
<dl class="section return"><dt>Returns</dt><dd>If true, PublishStoreGapException can be thrown by the store if the client logs onto a server that appears to be missing messages no longer held in the store. </dd></dl>

</div>
</div>
<a class="anchor" id="a5cf5ab022849a4bc25c5d4f75653cf8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">amps_uint64_t AMPS::Store::getLastPersisted </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the last persisted message sequence in the store. </p>
<dl class="section return"><dt>Returns</dt><dd>The sequence of the last persisted message. </dd></dl>

</div>
</div>
<a class="anchor" id="a928e1a334e213cb4d00a113e85984d52"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">amps_uint64_t AMPS::Store::getLowestUnpersisted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the oldest unpersisted message sequence in the store. </p>
<dl class="section return"><dt>Returns</dt><dd>The sequence of the oldest message. </dd></dl>

</div>
</div>
<a class="anchor" id="a3302f995710b33a7d16b715e7e2bd7ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AMPS::Store::isValid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to return if there is an underlying implementation for the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if there is an implementation or false if an empty handle. </dd></dl>

</div>
</div>
<a class="anchor" id="a061742652521bbbf91709703cd75f8cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AMPS::Store::replay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAMPS_1_1StoreReplayer.html">StoreReplayer</a> &amp;&#160;</td>
          <td class="paramname"><em>replayer_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to get all stored and non-discarded messages replayed by the store onto the <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replayer_</td><td>The <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a> to be used to replay the messages. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac715c8dd8436c4c484e53a31668366a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AMPS::Store::replaySingle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAMPS_1_1StoreReplayer.html">StoreReplayer</a> &amp;&#160;</td>
          <td class="paramname"><em>replayer_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">amps_uint64_t&#160;</td>
          <td class="paramname"><em>index_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to get a single message replayed by the store onto the <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replayer_</td><td>The <a class="el" href="classAMPS_1_1StoreReplayer.html" title="Abstract base class for replaying a publish message. ">StoreReplayer</a> to be used to replay the messages. </td></tr>
    <tr><td class="paramname">index_</td><td>The index of the message to replay. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true for success, false for failure such as an invalid index. </dd></dl>

</div>
</div>
<a class="anchor" id="ac7f5bd02d664786a067b1cf8b54728fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AMPS::Store::setErrorOnPublishGap </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>errorOnPublishGap_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to enable or disable throwing PublishStoreGapException. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorOnPublishGap_</td><td>If true, PublishStoreGapException can be thrown by the store if the client logs onto a server that appears to be missing messages no longer held in the store. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab267b150a870f650ea5f3a5b6c6aac01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AMPS::Store::setResizeHandler </td>
          <td>(</td>
          <td class="paramtype">PublishStoreResizeHandler&#160;</td>
          <td class="paramname"><em>handler_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userData_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a handler to be called if the <a class="el" href="classAMPS_1_1Store.html" title="Handle class for StoreImpl classes that track publish messages. ">Store</a> needs to resize in order to keep storing messages. </p>
<p>Resize could be caused by not being connected to the server, publishing messages faster than the network or AMPS can keep up, not properly discarding messages when receiving persisted acks, or AMPS being unable to complete persistence such as when its connection to a sync replication destination is unavailable. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler_</td><td>The handler to be called when a resize event is required. </td></tr>
    <tr><td class="paramname">userData_</td><td>The data to pass to the handler each time it is called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acb06fbca0f83c7c4dfc91662b9149dba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">amps_uint64_t AMPS::Store::store </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAMPS_1_1Message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>message_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by <a class="el" href="classAMPS_1_1Client.html" title="Client represents a connection to an AMPS server, but does not provide failover or reconnection behav...">Client</a> to store a message being published. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message_</td><td>The message to store. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac936fdf868fb74571577f3f6f9251930"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t AMPS::Store::unpersistedCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to return how many messages are in the store that have not been discarded, indicating that they are not yet persisted by the AMPS server. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of messages not yet persisted by the AMPS server. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/amps/<a class="el" href="ampsplusplus_8hpp_source.html">ampsplusplus.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>AMPS</b></li><li class="navelem"><a class="el" href="classAMPS_1_1Store.html">Store</a></li>
    <li class="footer">Generated on Mon Oct 9 2023 18:11:31 for AMPS C/C++ Client Class Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
